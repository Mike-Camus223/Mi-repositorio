<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Instant Dropdown Filter with Bootstrap 5</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Añadimos un poco de margen para espaciar el contenido */
    .container {
      margin-top: 50px;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>Productos</h2>
  <!-- Lista de productos -->
  <div class="row">
    <div class="col">
      <ul class="list-group mt-3">
        <!-- Producto 1 -->
        <li class="list-group-item">
          <a href="#" class="dropdown-toggle" id="dropdownMenuLink1">Producto 1</a>
          <ul class="dropdown-menu mt-2" aria-labelledby="dropdownMenuLink1">
            <li><a class="dropdown-item" href="#">Opción 1</a></li>
            <li><a class="dropdown-item" href="#">Opción 2</a></li>
            <li><a class="dropdown-item" href="#">Opción 3</a></li>
          </ul>
        </li>
        <!-- Producto 2 -->
        <li class="list-group-item">
          <a href="#" class="dropdown-toggle" id="dropdownMenuLink2">Producto 2</a>
          <ul class="dropdown-menu mt-2" aria-labelledby="dropdownMenuLink2">
            <li><a class="dropdown-item" href="#">Opción 1</a></li>
            <li><a class="dropdown-item" href="#">Opción 2</a></li>
            <li><a class="dropdown-item" href="#">Opción 3</a></li>
          </ul>
        </li>
        <!-- Producto 3 -->
        <li class="list-group-item">
          <a href="#" class="dropdown-toggle" id="dropdownMenuLink3">Producto 3</a>
          <ul class="dropdown-menu mt-2" aria-labelledby="dropdownMenuLink3">
            <li><a class="dropdown-item" href="#">Opción 1</a></li>
            <li><a class="dropdown-item" href="#">Opción 2</a></li>
            <li><a class="dropdown-item" href="#">Opción 3</a></li>
          </ul>
        </li>
      </ul>
    </div>
    <div class="col">
      <div class="mt-3" id="menuContent" style="display: none;">
        <!-- Espacio donde se mostrarán los enlaces -->
        <h3>Contenido del Menú</h3>
        <ul class="list-group" id="menuLinks">
          <!-- Aquí se agregarán dinámicamente los enlaces -->
        </ul>
      </div>
    </div>
  </div>
</div>

<script>
  // Seleccionar todos los elementos dropdown-toggle
  var dropdownToggles = document.querySelectorAll('.dropdown-toggle');
  // Seleccionar el contenedor del menú
  var menuContent = document.getElementById('menuContent');
  // Seleccionar la lista de enlaces del menú
  var menuLinks = document.getElementById('menuLinks');

  // Iterar sobre todos los elementos dropdown-toggle y agregar un evento clic
  dropdownToggles.forEach(function(dropdownToggle) {
    dropdownToggle.addEventListener('click', function() {
      // Obtener el menú desplegable asociado a este enlace
      var dropdownMenu = this.nextElementSibling;
      
      // Alternar la clase 'show' para mostrar u ocultar el menú desplegable
      dropdownMenu.classList.toggle('show');

      // Mostrar u ocultar el contenedor del menú de acuerdo a la visibilidad de los menús desplegables
      menuContent.style.display = Array.from(dropdownToggles).some(toggle => toggle.nextElementSibling.classList.contains('show')) ? 'block' : 'none';
    });
  });

  // Cerrar los menús desplegables si se hace clic fuera de ellos
  window.addEventListener('click', function(event) {
    dropdownToggles.forEach(function(dropdownToggle) {
      var dropdownMenu = dropdownToggle.nextElementSibling;
      if (!dropdownToggle.contains(event.target) && !dropdownMenu.contains(event.target)) {
        dropdownMenu.classList.remove('show');
        menuContent.style.display = 'none';
      }
    });
  });

  // Función para agregar enlaces al menú
  function addLinkToMenu(linkText) {
    var li = document.createElement('li');
    li.classList.add('list-group-item');
    var a = document.createElement('a');
    a.classList.add('dropdown-item');
    a.href = '#';
    a.textContent = linkText;
    li.appendChild(a);
    menuLinks.appendChild(li);
  }

  // Ejemplo: Agregar enlaces al menú
  addLinkToMenu('Enlace 1');
  addLinkToMenu('Enlace 2');
  addLinkToMenu('Enlace 3');
</script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
</body>
</html>
